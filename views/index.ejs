<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script defer>
    const invalid = '<%= invalid %>';
    const characters = '<%= characters %>';

    const text = window.location.search.match(/(?:\?text=)(.*)(?:&.*)/)?.[1];

    document.addEventListener('DOMContentLoaded', function () {
      const input = document.querySelector('input.form-control')

      if (invalid === 'true') {
        input.classList.add('is-invalid')
      }

      if (characters > 0) {
        input.classList.add('is-valid')
      }

      if (text) {
        input.value = text
      }
    });
  </script>
  <title>Count your texts here!</title>
</head>

<body>
  <div class="my-5 container">
    <h1 class="d-flex justify-content-center">Count your texts here!</h1>

    <form action="/" method="get" class="needs-validation" novalidate>
      <div class="form-group">
        <label for="text" class="form-label">Type something to discover how many characters the text has</label>
        <input class="form-control" id="text" name="text" rows="1"></input>
        <div class="invalid-feedback">Text is required</div>
        <div class="valid-feedback">Your text has <%= characters %> characters</div>
      </div>
      <input type="hidden" name="shouldValidate" value=true />
      <div class="justify-content-end d-flex mt-2">
        <button type="submit" class="btn btn-primary">Count</button>
      </div>
    </form>
  </div>
</body>

</html>